@if (investment()) {
    <div class="bg-surface-0 dark:bg-surface-900 rounded-2xl border border-surface-200 dark:border-surface-700 overflow-hidden">
        <!-- Image Container -->
        <div class="aspect-square w-full max-h-72 overflow-hidden bg-surface-100 dark:bg-surface-800">
            <img [src]="investment()!.imageUrl" [alt]="investment()!.name" class="w-full h-full object-cover" />
        </div>

        <!-- Details -->
        <div class="p-6">
            <h2 class="text-2xl font-bold text-surface-900 dark:text-surface-0 mb-1">
                {{ investment()!.name }}
            </h2>
            <span class="inline-block text-sm font-medium text-primary bg-primary/10 px-3 py-1 rounded-full mb-4">
                {{ investment()!.category }}
            </span>
            <p class="text-surface-600 dark:text-surface-400 mb-6 leading-relaxed">
                {{ investment()!.description }}
            </p>

            <div class="grid grid-cols-3 gap-4 mb-6">
                <div class="bg-surface-50 dark:bg-surface-800 rounded-xl p-4">
                    <div class="text-sm text-surface-500 dark:text-surface-400 mb-1">Equipment Cost</div>
                    <div class="font-semibold text-surface-900 dark:text-surface-0">{{ investment()!.equipmentCost | currency: 'USD' : 'symbol' : '1.0-0' }}</div>
                </div>
                <div class="bg-surface-50 dark:bg-surface-800 rounded-xl p-4">
                    <div class="text-sm text-surface-500 dark:text-surface-400 mb-1">Annual Operating Costs</div>
                    <div class="font-semibold text-surface-900 dark:text-surface-0">{{ investment()!.otherAnnualCosts | currency: 'USD' : 'symbol' : '1.0-0' }}</div>
                </div>
                <div class="bg-surface-50 dark:bg-surface-800 rounded-xl p-4"></div>
            </div>

            <!-- ROI Parameters Form -->
            <div class="border-t border-surface-200 dark:border-surface-700 pt-6">
                <h3 class="text-lg font-semibold text-surface-900 dark:text-surface-0 mb-4">ROI Parameters</h3>

                <div class="grid grid-cols-2 gap-x-4 gap-y-6">
                    <p-floatlabel variant="on" class="w-full">
                        <p-inputnumber [(ngModel)]="ftePositions" inputId="ftePositions" [minFractionDigits]="0" [maxFractionDigits]="2" [min]="0" class="w-full" [inputStyleClass]="'w-full'" />
                        <label for="ftePositions">FTE Positions</label>
                    </p-floatlabel>

                    <p-floatlabel variant="on" class="w-full">
                        <p-inputnumber [(ngModel)]="fullyLoadedAnnualCostPerFte" inputId="fullyLoadedAnnualCostPerFte" mode="currency" currency="USD" locale="en-US" [min]="0" class="w-full" [inputStyleClass]="'w-full'" />
                        <label for="fullyLoadedAnnualCostPerFte">Annual Cost Per FTE</label>
                    </p-floatlabel>

                    <p-floatlabel variant="on" class="w-full">
                        <p-inputnumber [(ngModel)]="timeHorizonYears" inputId="timeHorizonYears" [minFractionDigits]="0" [maxFractionDigits]="0" [min]="1" suffix=" years" class="w-full" [inputStyleClass]="'w-full'" />
                        <label for="timeHorizonYears">Time Horizon</label>
                    </p-floatlabel>

                    <div class="flex items-center">
                        <p-checkbox [(ngModel)]="includeNpv" inputId="includeNpv" [binary]="true" />
                        <label for="includeNpv" class="ml-2 text-surface-700 dark:text-surface-300">Include NPV</label>
                    </div>
                </div>

                @if (includeNpv) {
                    <div class="grid grid-cols-2 gap-x-4 gap-y-6 mt-6">
                        <p-floatlabel variant="on" class="w-full">
                            <p-inputnumber [(ngModel)]="discountRatePercent" inputId="discountRatePercent" [minFractionDigits]="0" [maxFractionDigits]="2" [min]="0" [max]="100" suffix="%" class="w-full" [inputStyleClass]="'w-full'" />
                            <label for="discountRatePercent">Discount Rate</label>
                        </p-floatlabel>
                    </div>
                }
            </div>
        </div>
    </div>
} @else {
    <div class="flex flex-col items-center justify-center h-full text-surface-400 dark:text-surface-500">
        <span class="pi pi-search text-5xl mb-4"></span>
        <p class="text-lg">Select an investment to view details</p>
    </div>
}
